<!-- V:3.0.2 -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- <meta http-equiv="refresh" content="1"> -->
	<link rel="stylesheet" type="text/css" href="../css/chat.css">
	<script src="/socket.io/socket.io.js"></script>
	<title>-MiniChat-</title>
</head>
<body>
	<div class="frame" id="status">
		<h2 id='connectionResponse'>Status: [OFFLINE]</h2>
	</div>
	<div class="frame" id="textZone">
		<textarea readonly id='messageBox' rows="4" cols="10" ></textarea>
	</div>
	<div class="frame" id='inputZone'>
		<input type="text" id="inputBox" placeholder="message">
		<button id="sendButton" onclick="sendMessage()"> send </button>
	</div>
	<script>
		const socket=io()
		socket.on('connect', ()=>{
			document.getElementById('connectionResponse').style.color="green"
			document.getElementById('connectionResponse').innerHTML="Status: [ONLINE]"
			return socket.emit('newconnection', 'client connected')
		})
		function sendMessage() {
			return socket.emit('message', document.getElementById('inputBox').value)
		}
		socket.on('reciveMessage', (args)=>{
			var ta = document.getElementById('messageBox');
			ta.value+='\n'+args
			return ta.scrollTop = ta.scrollHeight;
		})
	</script>
</body>
</html>